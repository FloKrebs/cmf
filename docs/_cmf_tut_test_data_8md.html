<!-- HTML header for doxygen 1.8.3-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<title>cmf: $title</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
  <span id="projectlogo"><img alt="cmf - the catchment modelling framework" src="cmf-logo-klein.png"/></span>
  <span style="padding-left: 2em;">
   <span id="projectname">cmf
   &#160;<span id="projectnumber">1.2.1a0</span>
   </span>
   <span id="projectbrief">The Catchment Modelling Framework</span>
  </span>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="contents">
<div class="textblock"><p><a class="el" href="_cmf_tut_start_8md.html">index</a>, <a class="el" href="_cmf_tut_meteostation_8md.html">next</a></p>
<h1>Forcing data for test cases</h1>
<p>Some forcing example data are available here: [htdocs:examples/climate.csv]</p>
<h2>Available data</h2>
<p>Models that reveal a more realistic insight than the previous one, need data. For the next test cases we are going to use meteorological data from the region, where cmf is developed: Gießen, Germany (50°35' N, 8°40' E). Download the meteorological data as a simple .csv file here. The data contains daily timesteps from 1985 to 2006.</p>
<p>Available fields: - date in YYYY-MM-DD format - Rainfall, mean = 1.586 mm/day = 578 mm/a - Daily min Temperature, mean = 5.6 °C - Daily max Temperature, mean = 13.96 °C - mean daily relative Humidity, mean = 77%</p><ul>
<li>Windspeed, mean = 2.48 m/s - Sunshine fraction n/N, mean = 0.33 h/h, where n is the measured sunshine duration and N is the astronomical potential sunshine duration.</li>
</ul>
<h2>Loading data from a simple .csv file into cmf</h2>
<p>cmf does not enforce the usage of a particualar data format - data is loaded by the user script. Hence, the usage of text files in any format, relation databases (with the appropriate database connector for Python), netCDF with the netCDF4 package, and web services using the socket library can be used to retrieve data.</p>
<p>In this example we are going to read the test data set from an csv file using only standard Python. However, using pandas Dataframes or just the csv module from the standard library is working equally well.</p>
<p>First we create a function to load our meteorological data and we create an empty <a class="el" href="classcmf_1_1math_1_1timeseries.html">timeseries</a> for the rain fall and a <a class="el" href="classcmf_1_1atmosphere_1_1_meteo_station.html">MeteoStation</a> to hold the timeseries for the other meteorological observations. The <b>station</b> concept is explained in more detail in the <a class="el" href="_cmf_tut_meteostation_8md.html">next</a>tutorial". An introduction to timeseries is [here](CmfTutSpaceTime).</p>
<div class="fragment"><div class="line">import cmf</div><div class="line">def loadmeteo(project,csvfilename):</div><div class="line">    &quot;&quot;&quot;Loads the meteorology from a csv file.</div><div class="line">    This is just one example for access your meteo data.</div><div class="line">    Thanks to Python, there is no problem to access most type of datasets,</div><div class="line">    including relational databases, hdf / netcdf files or what ever else.</div><div class="line">    &quot;&quot;&quot;</div><div class="line"></div><div class="line">    # Create a timeseries for rain - timeseries objects in cmf is a kind of extensible array of </div><div class="line">    # numbers, with a begin date, a timestep.</div><div class="line">    begin = datetime(1980,1,3)</div><div class="line">    rain = cmf.timeseries(begin = begin, step = timedelta(days=1))</div><div class="line"></div><div class="line">    # Create a meteo station</div><div class="line">    meteo=project.meteo_stations.add_station(name = &#39;Giessen&#39;,position = (0,0,0))</div><div class="line"></div><div class="line">    # Meteorological timeseries, if you prefer the beginning of the timeseries</div><div class="line">    # read in from file, just go ahead, it is only a bit of Python programming</div><div class="line">    meteo.Tmax      = cmf.timeseries(begin = begin, step = timedelta(days=1))</div><div class="line">    meteo.Tmin      = cmf.timeseries(begin = begin, step = timedelta(days=1))</div><div class="line">    meteo.rHmean    = cmf.timeseries(begin = begin, step = timedelta(days=1))</div><div class="line">    meteo.Windspeed = cmf.timeseries(begin = begin, step = timedelta(days=1))</div><div class="line">    meteo.Sunshine  = cmf.timeseries(begin = begin, step = timedelta(days=1))</div></div><!-- fragment --><p>Now we read in the file and append the read values to the timeseries.</p>
<div class="fragment"><div class="line"># Load climate data from csv file</div><div class="line"># could be simplified with numpy&#39;s </div><div class="line">csvfile =  file(csvfilename) </div><div class="line">csvfile.readline() # Read the headers, and ignore them</div><div class="line">for line in csvfile:</div><div class="line">    # split the line in to columns using commas</div><div class="line">    columns = line.split(&#39;,&#39;)</div><div class="line">    # Get the values, but ignore the date, we have begin and step</div><div class="line">    # of the data file hardcoded</div><div class="line">    rain.add(float(columns[[1]))|        meteo.Tmax.add(float(columns[2]]))</div><div class="line">    meteo.Tmin.add(float(columns[[3]))|        meteo.rHmean.add(float(columns[4]]))</div><div class="line">    meteo.Windspeed.add(float(columns[[5]))|        meteo.Sunshine.add(float(columns[6]]))</div></div><!-- fragment --><p>The last part is to create a station (see <a class="el" href="_cmf_tut_meteostation_8md.html">next</a>tutorial") for the rainfall data and apply the stations to the cells of the project.</p>
<div class="fragment"><div class="line"># Create a rain gauge station</div><div class="line">project.rainfall_stations.add(&#39;Giessen&#39;,rain,(0,0,0))</div><div class="line"></div><div class="line"># Use the rainfall for each cell in the project</div><div class="line">project.use_nearest_rainfall()</div><div class="line"># Use the meteorological station for each cell of the project</div><div class="line">project.use_nearest_meteo()</div></div><!-- fragment --><p>Depending on your needs, any data source you can read with Python (which is virtually any) is suitable to read forcing data for cmf models.</p>
<p>author: philipp, version: 6 Fri Mar 7 13:52:06 2014 </p>
</div></div><!-- contents -->
<hr class="footer"/><address class="footer"><small>
<div>&copy 2008-2017 by 
<a class="el" href="http://www.uni-giessen.de/hydro/kraft"> Philipp Kraft</a> and
<a class="el" href="http://www.uni-giessen.de/hydro"> 
Institute of Landscape Ecology and Resources Management,University of Gie&szlig;en</a>
</h3></td>
<td>Generated: Fri Apr 6 2018 11:42:04</td>
</tr></table>
</small></address>
</body>
</html>
